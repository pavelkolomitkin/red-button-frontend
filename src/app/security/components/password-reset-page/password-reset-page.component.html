<div class="login-page">
  <div class="login-box">
    <div class="login-logo">
      <span><b>Red</b>Button</span>
    </div>
    <!-- /.login-logo -->
    <div class="login-box-body">
      <p class="login-box-msg">{{ 'RESET_PASSWORD' | translate }}</p>

      <ng-container *ngIf="currentState === 'checking_key'">
        <p class="alert alert-info">{{ 'CHECKING_LINK' | translate }}...</p>
      </ng-container>

      <ng-container *ngIf="currentState === 'invalid_key'">
        <p class="alert alert-danger">{{ 'INVALID_RESTORE_LINK' | translate }}</p>
      </ng-container>

      <ng-container *ngIf="currentState === 'success'">
        <p class="alert alert-success">{{ 'YOU_RESTORED_YOUR_PASSWORD' | translate }}!</p>
      </ng-container>

      <form #form="ngForm" (ngSubmit)="onSubmitHandler(form)" *ngIf="currentState === 'input'">
        <app-form-field-error-list [field]="'key'" [errors]="errors"></app-form-field-error-list>
        <div class="form-group has-feedback">
          <input
                  ngModel
                  name="password"
                  autocomplete
                  required
                  type="password"
                  class="form-control"
                  placeholder="{{ 'PASSWORD' | translate }}"
          >
          <span class="glyphicon glyphicon-lock form-control-feedback"></span>
          <app-form-field-error-list [field]="'password'" [errors]="errors.plainPassword ? errors.plainPassword : {}"></app-form-field-error-list>
        </div>

        <div class="form-group has-feedback">
          <input
                  ngModel
                  name="passwordRepeat"
                  autocomplete
                  required
                  type="password"
                  class="form-control"
                  placeholder="{{ 'RETYPE_PASSWORD' | translate }}"
          >
          <span class="glyphicon glyphicon-log-in form-control-feedback"></span>
          <app-form-field-error-list [field]="'passwordRepeat'" [errors]="errors.plainPassword ? errors.plainPassword : {}"></app-form-field-error-list>
        </div>
        <div class="row">
          <div class="col-xs-6">
          </div>
          <!-- /.col -->
          <div class="col-xs-6">
            <button type="submit" class="btn btn-primary btn-block" [disabled]="!form.valid || isRequesting">{{ 'SUBMIT_OK' | translate }}</button>
          </div>
          <!-- /.col -->
        </div>
      </form>

      <div class="box-body footer-links">

        <div class="pull-left">
          <a routerLink="/security/login" class="text-center">{{ 'LOGIN' | translate }}</a>
        </div>
        <div class="pull-right">
          <a routerLink="/security/register" class="text-center">{{ 'REGISTER' | translate }}</a>
        </div>

      </div>
    </div>
  </div>
</div>
